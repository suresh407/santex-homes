!function(t,i,e,n){"use strict";var s=e(t),o=e(i),h=function(t){return t&&t.hasOwnProperty&&t instanceof e},p=e.littleLightBox=function(){p.open.apply(this,arguments)};e.extend(p,{defaults:{helpers:{},tpl:{wrap:'<div class="lightbox-wrap"><div class="lightbox-skin"><div class="lightbox-outer"><div class="lightbox-inner" style="overflow: hidden;"></div></div></div></div>',img:'<img class="lightbox-image" src="{href}" style="width:100%;height:100%;"/>',loading:'<div class="lightbox-loading"><div></div></div>',closeBtn:'<div class="lightbox-closeBtn"></div>',prevBtn:'<div class="lightbox-prevBtn lightbox-nav"><span></span></div>',nextBtn:'<div class="lightbox-nextBtn lightbox-nav"><span></span></div>'},padding:15,minWidth:200,minHeight:200,maxWidth:9999,maxHeight:9999,wrapRatio:.8,top:.5,left:.5,loop:!1,openMethod:"fadeIn",openDirect:"down",openSpeed:400,distance:200,closeMethod:"fadeOut",closeDirect:"up",closeDistance:"hide",closeSpeed:400,prevMethod:"changeOut",nextMethod:"changeIn",changeSpeed:600,direction:{next:"left",prev:"right"},keys:{close:[27,46],next:{13:"left",39:"left",68:"left",40:"up",34:"up",83:"up"},prev:{8:"right",37:"right",65:"right",38:"down",33:"down",87:"down"}}},helpers:{},isOpen:!1,isClosing:!1,isDisplay:!1,doUpdate:null,coming:null,current:null,open:function(t,i){t&&(this.opts=e.extend({},this.defaults,i||{}),i&&i.keys&&e.extend(this.opts,this.defaults.keys,i.keys),e.isArray(t)||(t=h(t)?t.get():[t]),e.each(t,function(i,n){var s={},o="",p="",a=0;return a=i+1,n.nodeType&&(n=e(n)),h(n)&&(p=n.data("lightbox-href")||n.attr("href"),o=n.data("lightbox-title")||n.attr("title")||""),p||n.attr("src")&&(p=n.attr("src"))||(p=n.find("img[src]").attr("src")),!!p&&(e.extend(s,{index:a,href:p,text:o,element:n}),void(t[i]=s))}),this.group=t,this._run(this.opts.index))},next:function(t){if(!p.isClosing){var i,n,s=p.current;s&&(i=s.index,n=t&&"string"===e.type(t)?t:s.direction.next,this._jump(i+1,n))}},prev:function(t){if(!p.isClosing){var i,n,s=p.current;s&&(i=s.index,n=t&&"string"===e.type(t)?t:s.direction.prev,this._jump(i-1,n))}},_jump:function(t,i){if(this.isDisplay){var e=this.group.length,t=t-1;p.direction=i,this._hideLoading(),this.opts.loop&&(t<0&&(t=e+t%e),t%=e),this._run(t)}},_run:function(t){var i=this.group[t],n=e.extend({},this.opts,i);i&&(this.isOpen||this.helpers.mask.open(this.opts.helpers.mask||{}),this.wrap=n.wrap=e(n.tpl.wrap).appendTo(n.parent||"body").hide(),"number"===e.type(n.padding)&&(n.padding=[n.padding,n.padding,n.padding,n.padding]),e.extend(n,{skin:e(".lightbox-skin",n.wrap),outer:e(".lightbox-outer",n.wrap),inner:e(".lightbox-inner",n.wrap),loading:null}),n.inner.width(0).height(0),this.width=n.padding[1]+n.padding[3],this.height=n.padding[0]+n.padding[2],n.skin.css("padding",n.padding[0]+"px "+n.padding[1]+"px "+n.padding[2]+"px "+n.padding[3]+"px"),this._setPosition(n.wrap,!1),this.coming=n,this._loadImage())},_loadImage:function(){var t=new Image,i=this;t.src=this.coming.href,t.onload=function(){i.coming.width=this.width,i.coming.height=this.height,i._afterLoad()},t.complete||this._showLoading()},_showLoading:function(){var t=this._getPosition();this.coming.loading||(this._hideLoading(),this.coming.loading=e(this.coming.tpl.loading).appendTo(this.coming.parent||"body"),this.coming.loading.css({top:.5*s.height()+t.scrollTop,left:.5*s.width()+t.scrollLeft}))},_hideLoading:function(){this.coming&&this.coming.loading&&(this.coming.loading.stop().off(".loading").remove(),this.coming.loading=null)},_afterLoad:function(){this._hideLoading();var t,i,n=this.coming,s=this.current;e.extend(p,{wrap:n.wrap,skin:n.skin,outer:n.outer,inner:n.inner,current:n,previous:s,coming:null}),this.unbindEvent(),s&&(this.width="auto",this.height="auto",this.helpers.title.hide(),s.wrap.stop(!0,!0).find(".lightbox-nav, .lightbox-closeBtn").remove()),t=n.href,i=n.tpl.img.replace(/\{href\}/g,t),e(i).appendTo(n.inner);var o=e.extend({text:n.text,idxInfo:"image "+n.index+" of "+this.group.length},n.helpers.title);this.helpers.title.show(o),n.closeBtn=e(n.tpl.closeBtn).appendTo(n.skin),n.wrap.show(),(n.index>1||this.opts.loop)&&(n.prevBtn=e(n.tpl.prevBtn).appendTo(n.skin)),(n.index<this.group.length||this.opts.loop)&&(n.nextBtn=e(n.tpl.nextBtn).appendTo(n.skin)),this.bindEvent(),this._setDimension(!1),this._setPosition(this.wrap,!1),s&&(this.isDisplay=!1,this.trasition[s.prevMethod]()),this.trasition[this.isOpen?n.nextMethod:n.openMethod]()},unbindEvent:function(){var t=this.current;t&&h(t.wrap)&&t.wrap.off(".btn"),s.off(".lb"),o.off(".lb")},bindEvent:function(){var t,i=p.current;i&&(s.off(".lb").on("resize.lb",this.update),t=i.keys,t&&o.on("keydown.lb",function(i){var s=i.which||i.keyCode;e.each(t,function(t,i){return e.inArray(s,i)>-1&&!p.coming?(p[t](),!1):p.group.length>1&&i[s]!==n?(p[t](i[s]),!1):void 0}),i.preventDefault()}))},update:function(){var t=p.current,i=p.doUpdate;p.isOpen&&!i&&(p.doUpdate=setTimeout(function(){t&&!p.isClosing&&(p.trigger("onUpdate"),p._setDimension(!0),p._setPosition(t.wrap,!0),p.doUpdate=null)},300))},trigger:function(t,i){var i=i||p;i&&(e.isFunction(i[t])&&i[t].apply(i,Array.prototype.slice.call(arguments,1)),e.each(i.helpers,function(i,n){n&&e.isFunction(n[t])&&n[t].apply(n,Array.prototype.slice.call(arguments,1))})),o.trigger(t)},_setDimension:function(t){var i,e,n,o,h,p,a,r,d,l,c,g;c=this.current.wrapRatio,n=s.width()*c,o=s.height()*c,h=this.current.minWidth,p=this.current.minHeight,a=this.current.maxWidth,r=this.current.maxHeight,i=this.current.width+this.current.padding[1]+this.current.padding[3],e=this.current.height+this.current.padding[0]+this.current.padding[2],g=1*this.current.width/this.current.height,a=Math.min(n,a),r=Math.min(o,r),i>a&&(i=a,e=i/g),e>r&&(e=r,i=e*g),i<h&&(i=h,e=i/g),e<p&&(e=p,i=e*g),this.innerWidth=d=i-this.current.padding[1]-this.current.padding[3],this.innerHeight=l=e-this.current.padding[0]-this.current.padding[2],this.width=i,this.height=e,t?this.inner.animate({width:d,height:l}):this.inner.width(d).height(l)},_setPosition:function(t,i){var e=this._getPosition();i?t.animate(e):t.css({top:e.top,left:e.left})},_getPosition:function(){var t={scrollTop:s.scrollTop(),scrollLeft:s.scrollLeft()};return t.top=(s.height()-p.height)*this.opts.top+t.scrollTop,t.left=(s.width()-p.width)*this.opts.left+t.scrollLeft,t},_afterLoadIn:function(){p.isOpen=!0;var t=p.current;p.index=t.index,t.closeBtn&&t.closeBtn.off(".btn").on("click.btn",function(t){t.preventDefault(),p.close()}),t.prevBtn&&t.prevBtn.off(".btn").on("click.btn",function(t){t.preventDefault(),p.prev()}),t.nextBtn&&t.nextBtn.off(".btn").on("click.btn",function(t){t.preventDefault(),p.next()}),p.isDisplay=!0},_afterLoadOut:function(){p.isOpen=!p.isClosing,p.isClosing=!1,p.isOpen&&p.previous?p.previous.wrap.remove():(p.wrap.remove(),p.helpers.mask.close(),p.helpers.title.hide(),p.mask=null,p.doUpdate=null,p.current=null,p.coming=null)},close:function(){this.isOpen&&!this.isClosing&&(this.isClosing=!0,p.isDisplay=!1,this.unbindEvent(),this._hideLoading(),this.trasition[this.opts.closeMethod]())}}),p.trasition={getCenter:function(){var t={w:s.width(),h:s.height(),y:s.scrollTop(),x:s.scrollLeft()};return t},fadeIn:function(){var t=p._getPosition(),i=e.extend({opacity:1},t),n=p.isOpen?p.opts.changeSpeed:p.opts.openSpeed;t.opacity=.1,p.wrap.stop(!0,!0).css(t).animate(i,{duration:n,complete:p._afterLoadIn})},elasticIn:function(){var t=.9,i=.8,n=this.getCenter(),s={width:p.innerWidth,height:p.innerHeight},o=p.opts.minWidth,h=p.opts.minHeight,a={width:o,height:h},r=e.extend({opacity:1},p._getPosition()),d={opacity:0,top:n.h*t*p.opts.top+n.y,left:n.w*i*p.opts.left+n.x},l=p.isOpen?p.opts.changeSpeed:p.opts.openSpeed;p.inner.stop(!0,!0).css(a).animate(s,{duration:l}),p.wrap.stop(!0,!0).css(d).animate(r,{duration:l,complete:p._afterLoadIn})},changeIn:function(){var t,i=p.current,e=p.isOpen?p.direction:i.openDirect,n="hide"===p.opts.openDistance?"hide":200,s=p.isOpen?p.opts.changeSpeed:p.opts.openSpeed,o=p._getPosition(),h={opacity:1};t="down"===e||"up"===e?"top":"left",o.opacity=.1,n="hide"===n?"top"===t?o.top:o.left:"top"===t?Math.min(n,o.top):Math.min(n,o.left),"down"===e||"right"===e?(o[t]=o[t]-n+"px",h[t]="+="+n+"px"):(o[t]=o[t]+n+"px",h[t]="-="+n+"px"),i.wrap.stop(!0,!0).css(o).animate(h,{duration:s,complete:p._afterLoadIn})},fadeOut:function(){var t=p.previous,i=p.isClosing?p.wrap:t.wrap,e=p.isClosing?p.opts.changeSpeed:p.opts.closeSpeed;i.stop(!0,!0).animate({opacity:0},{duration:e,complete:p._afterLoadOut})},elasticOut:function(){var t=.9,i=.8,e=p.previous,n=p.isClosing?p.wrap:e.wrap,s=this.getCenter(),o=p.isClosing?p.opts.changeSpeed:p.opts.closeSpeed,h={opacity:0,top:s.h*t*p.opts.top+s.y,left:s.w*i*p.opts.left+s.x},a={width:0,height:0};n.find(".lightbox-title").fadeOut(),n.find(".lightbox-inner").stop(!0,!0).animate(a,{duration:o}),n.stop(!0,!0).animate(h,{duration:o,complete:p._afterLoadOut})},changeOut:function(){var t,i=p.previous,e=p.isClosing?p.wrap:i.wrap,n=p.isClosing?p.opts.closeDirect:p.direction,s=p.isClosing?"hide"===p.opts.closeDistance?"hide":200:p.opts.distance,o=p.isClosing?p.opts.changeSpeed:p.opts.closeSpeed,h=p._getPosition(),a={opacity:.1};t="down"===n||"up"===n?"top":"left",s="hide"===s?"top"===t?h.top:h.left:"top"===t?Math.min(s,h.top):Math.min(s,h.left),"down"===n||"right"===n?a[t]="+="+s+"px":a[t]="-="+s+"px",e.stop(!0,!0).animate(a,{duration:o,complete:p._afterLoadOut})}},p.helpers.mask={defaults:{closeClick:!0,speed:200,fix:!0},tpl:'<div class="lightbox-mask" style="width: 100%; height: 100%;"></div>',mask:null,parent:"body",create:function(t){t=t||{},this.opts=e.extend({},this.defaults,t),this.mask&&this.close(),this.mask=e(this.tpl).appendTo(this.parent)},open:function(t){var i=this;this.mask||this.create(t),this.mask.width(o.width()).height(o.height()),this.opts.closeClick&&this.mask.off(".mask").on("click.mask",function(t){e(t.target).hasClass("lightbox-mask")&&(p.isOpen?p.close():i.close())}),this.mask.fadeIn(i.opts.speed)},close:function(){var t=this;p.isClosing||(p._hideLoading(),t.mask.off(".mask").fadeOut(t.opts.speed,function(){t.mask.remove(),t.mask=null}))},onUpdate:function(){this.mask&&this.update()},update:function(){this.mask.width(o.width()).height(o.height())}},p.helpers.title={defaults:{position:"bottom",type:"over",text:"photo title",idxInfo:"image 0 of 0"},title:null,isExist:!1,create:function(t){p.current;switch(this.opts=e.extend({},this.defaults,t||{}),this.title&&this.title.stop(!0,!0).remove(),this.opts.type){case"inside":this.parent=p.skin,this.title=e('<div class="lightbox-title lightbox-title-'+this.opts.type+'"><p>'+this.opts.text+"</p></div>");break;case"over":default:this.parent=p.outer,this.title=e('<div class="lightbox-title lightbox-title-'+this.opts.type+'"><p>'+this.opts.text+"</p><span>"+this.opts.idxInfo+"</span></div>")}this.title["bottom"===this.opts.position?"appendTo":"prependTo"](this.parent),this.isExist=!0},show:function(t){return this.beforeShow(t),this.isExist||this.create(t),this.title.fadeIn(),this.afterShow(t),this},hide:function(){var t=this;return this.isExist&&(this.isExist=!1,this.title.fadeOut(function(){t.title.remove(),t.title=null})),this},beforeShow:function(){e.noop},afterShow:function(){e.noop}},e.fn.littleLightBox=function(t){t=t?t:{};var i=e(this),n=this.selector||"",s=function(s){var o=e(this).blur(),h=0,a=t.groupType?t.groupType:"data-littlelightbox-group",r=o.attr(a);r||(a="rel",r=o.attr(a)),o=n.length?e(n):i,o=o.filter("["+a+"="+r+"]"),0===o.length&&(o=e(this)),h=o.index(this),t.index=h,p.open(o,t),s.preventDefault()};return e(n).off("click").on("click",s),this},e(function(){})}(window,document,jQuery);